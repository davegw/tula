var AcquisitionCreateButton=React.createClass({displayName:"AcquisitionCreateButton",render:function(){return React.createElement("div",{className:"text-center"},React.createElement("a",{className:"btn btn-success",href:"/admin/acquisitions/new"},"Add New Acquisition"))}}),AcquisitionYear=React.createClass({displayName:"AcquisitionYear",render:function(){return React.createElement("h3",{className:"text-center"},this.props.year," Acquisitions")}}),AcquisitionDeleteButton=React.createClass({displayName:"AcquisitionDeleteButton",clickHandler:function(){window.confirm("Are you sure you want to delete this Acquisition?")&&this.props.handleDelete(this.props.id,this.props.year)},render:function(){return React.createElement("div",{className:"btn btn-danger",onClick:this.clickHandler},"Delete")}}),AcquisitionDetail=React.createClass({displayName:"AcquisitionDetail",render:function(){return React.createElement("tr",null,React.createElement("td",{className:"text-center"},this.props.year),React.createElement("td",{className:"text-center"},this.props.company),React.createElement("td",{className:"text-center"},"$"+(+this.props.initialPrice).toFixed(2)),React.createElement("td",{className:"text-center"},"$"+(+this.props.acquisitionPrice).toFixed(2)),React.createElement("td",{className:"text-center"},(100*this.props["return"]).toFixed(1)+"%"),React.createElement("td",{className:"text-center"},React.createElement("a",{className:"btn btn-link",onClick:this.props.toggleEdit},"Edit")),React.createElement("td",{className:"text-center"},React.createElement(AcquisitionDeleteButton,{id:this.props.id,year:this.props.year,handleDelete:this.props.handleDelete})))}}),AcquisitionForm=React.createClass({displayName:"AcquisitionForm",handleEdit:function(){var e={year:React.findDOMNode(this.refs.year).value.trim(),company:React.findDOMNode(this.refs.company).value.trim(),initial_price:React.findDOMNode(this.refs.initialPrice).value.trim(),acquisition_price:React.findDOMNode(this.refs.acquisitionPrice).value.trim()};this.props.handleEdit(e)},render:function(){return React.createElement("tr",null,React.createElement("form",null,React.createElement("td",{className:"text-center"},React.createElement("input",{type:"text",defaultValue:this.props.year,className:"form-control text-center",ref:"year"})),React.createElement("td",{className:"text-center"},React.createElement("input",{type:"text",defaultValue:this.props.company,className:"form-control text-center",ref:"company"})),React.createElement("td",{className:"text-center"},React.createElement("input",{type:"text",defaultValue:this.props.initialPrice,className:"form-control text-center",ref:"initialPrice"})),React.createElement("td",{className:"text-center"},React.createElement("input",{type:"text",defaultValue:this.props.acquisitionPrice,className:"form-control text-center",ref:"acquisitionPrice"})),React.createElement("td",{className:"text-center"},React.createElement("input",{type:"text",defaultValue:this.props["return"],className:"form-control text-center",disabled:!0})),React.createElement("td",{className:"text-center"},React.createElement("a",{className:"btn btn-link",onClick:this.props.toggleEdit},"Cancel")),React.createElement("td",{className:"text-center"},React.createElement("button",{className:"btn btn-primary",type:"submit",onClick:this.handleEdit},"Update"))))}}),AcquisitionRow=React.createClass({displayName:"AcquisitionRow",getInitialState:function(){return{form:!1,year:this.props.year,company:this.props.company,initial_price:this.props.initialPrice,acquisition_price:this.props.acquisitionPrice,"return":this.props["return"]}},toggleEdit:function(){this.setState({form:!this.state.form})},updateAcquisition:function(e){$.ajax({url:"/api/admin/acquisitions/"+this.props.id,type:"PUT",data:{acquisition:e},success:function(e){this.setState({"return":e["return"]})}.bind(this),error:function(e,t,i){console.error(t,i.toString())}}),e.form=!1,this.setState(e)},render:function(){return this.state.form?React.createElement(AcquisitionForm,{key:this.props.id,id:this.props.id,year:this.state.year,company:this.state.company,initialPrice:this.state.initial_price,acquisitionPrice:this.state.acquisition_price,"return":this.state["return"],handleEdit:this.updateAcquisition,toggleEdit:this.toggleEdit}):React.createElement(AcquisitionDetail,{key:this.props.id,id:this.props.id,year:this.state.year,company:this.state.company,initialPrice:this.state.initial_price,acquisitionPrice:this.state.acquisition_price,"return":this.state["return"],handleDelete:this.props.handleDelete,toggleEdit:this.toggleEdit})}}),AcquisitionTable=React.createClass({displayName:"AcquisitionTable",render:function(){var e=this.props.acquisitions[this.props.year]||[],t=e.map(function(e){return React.createElement(AcquisitionRow,{key:e.id,id:e.id,year:e.year,company:e.company,initialPrice:e.initial_price,acquisitionPrice:e.acquisition_price,"return":e["return"],handleDelete:this.props.handleDelete})}.bind(this));return React.createElement("table",{className:"table table-striped"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:"text-center"},"Acquisition Year"),React.createElement("th",{className:"text-center"},"Company"),React.createElement("th",{className:"text-center"},"Price at 1/1/",this.props.year%1e3),React.createElement("th",{className:"text-center"},"Buy Out Price"),React.createElement("th",{className:"text-center"},"Return"),React.createElement("th",{className:"text-center"}),React.createElement("th",{className:"text-center"}))),React.createElement("tbody",null,t))}}),AcquisitionYearContainer=React.createClass({displayName:"AcquisitionYearContainer",render:function(){return React.createElement("div",null,React.createElement(AcquisitionYear,{year:this.props.year}),React.createElement(AcquisitionTable,{year:this.props.year,acquisitions:this.props.acquisitions,handleDelete:this.props.handleDelete}))}}),years=[],AcquisitionContainer=React.createClass({displayName:"AcquisitionContainer",getInitialState:function(){return{acquisitions:{}}},componentDidMount:function(){this.getAcquisitionData()},getAcquisitionData:function(){$.ajax({url:"/api/admin/acquisitions",dataType:"json",type:"GET",success:function(e){years=e.years,this.setState({acquisitions:e.acquisitions})}.bind(this),error:function(e,t,i){console.error(t,i.toString())}})},deleteAcquisition:function(e,t){this.state.acquisitions[t]=this.state.acquisitions[t].filter(function(t){return t.id!==e}),this.setState({acquisitions:this.state.acquisitions}),$.ajax({url:"/api/admin/acquisitions/"+e,dataType:"json",type:"DELETE",error:function(e,t,i){console.error(t,i.toString())}})},render:function(){var e=years.map(function(e,t){return React.createElement(AcquisitionYearContainer,{key:t,year:e,acquisitions:this.state.acquisitions,handleDelete:this.deleteAcquisition})}.bind(this));return React.createElement("div",null,React.createElement(AcquisitionCreateButton,null),e)}});React.render(React.createElement(AcquisitionContainer,null),document.getElementById("admin-acquisitions-index-container"));